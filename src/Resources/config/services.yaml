services:
  _defaults:
    autowire: true
    autoconfigure: true
    public: false

  # Основной сервис
  Jonston\SanctumBundle\Service\TokenManager:
    arguments:
      $tokenRepository: '@Jonston\SanctumBundle\Repository\PersonalAccessTokenRepository'
      $em: '@doctrine.orm.entity_manager'
      $tokenHasher: '@Jonston\SanctumBundle\Service\TokenHasher'

  # Репозиторий
  Jonston\SanctumBundle\Repository\PersonalAccessTokenRepository:
    factory: ['@doctrine', 'getRepository']
    arguments: [
      'Jonston\SanctumBundle\Entity\PersonalAccessToken'
    ]